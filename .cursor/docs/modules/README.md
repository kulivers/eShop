# Документация модулей eShop

Эта документация описывает все модули системы eShop и их проекты. Каждый модуль содержит описание своих проектов, их назначение, ответственность и особенности реализации.

## Структура документации

### Бизнес-модули

- **[Ordering](ordering.md)** - Модуль управления заказами
  - Ordering.API - REST API для заказов
  - Ordering.Domain - Доменный слой
  - Ordering.Infrastructure - Слой инфраструктуры
  - OrderProcessor - Фоновый сервис обработки заказов
  - Тесты: Ordering.UnitTests, Ordering.FunctionalTests

- **[Catalog](catalog.md)** - Модуль каталога товаров
  - Catalog.API - REST API для каталога
  - Тесты: Catalog.FunctionalTests

- **[Basket](basket.md)** - Модуль корзины покупок
  - Basket.API - gRPC API для корзины
  - Тесты: Basket.UnitTests

- **[Identity](identity.md)** - Модуль аутентификации и авторизации
  - Identity.API - Identity Server (OAuth 2.0 / OpenID Connect)

- **[PaymentProcessor](payment-processor.md)** - Модуль обработки платежей
  - PaymentProcessor - Фоновый сервис обработки платежей

- **[WebApp](webapp.md)** - Веб-приложение
  - WebApp - Blazor Server приложение
  - WebAppComponents - Переиспользуемые компоненты

### Инфраструктурные модули

- **[EventBus](eventbus.md)** - Модуль асинхронной коммуникации
  - EventBus - Абстракции Event Bus
  - EventBusRabbitMQ - Реализация через RabbitMQ

- **[Shared Infrastructure](shared-infrastructure.md)** - Общая инфраструктура
  - eShop.ServiceDefaults - Базовые сервисы Aspire
  - IntegrationEventLogEF - Логирование интеграционных событий
  - Shared - Общие утилиты

- **[AppHost](apphost.md)** - Оркестрация приложения
  - eShop.AppHost - Оркестратор всех сервисов через .NET Aspire

## Архитектура системы

```
┌─────────────────────────────────────────────────────────┐
│                    WebApp (Blazor)                      │
│                  (User Interface)                         │
└───────────────┬─────────────────────────────────────────┘
                │
    ┌───────────┼───────────┐
    │           │           │
┌───▼───┐  ┌───▼───┐  ┌───▼────────┐
│Catalog│  │ Basket│  │  Ordering  │
│  API  │  │  API  │  │    API     │
└───┬───┘  └───┬───┘  └───┬────────┘
    │          │          │
    │     ┌────┴────┐     │
    │     │         │     │
┌───▼─────▼───┐ ┌──▼──────▼────┐
│  PostgreSQL │ │   RabbitMQ    │
│             │ │  (Event Bus)   │
└─────────────┘ └───────────────┘
    │
┌───▼──────────┐
│   Redis      │
│  (Basket)    │
└──────────────┘

┌─────────────────────────────────────────┐
│         Background Services              │
│  ┌──────────────┐  ┌─────────────────┐  │
│  │OrderProcessor│  │PaymentProcessor │  │
│  └──────────────┘  └─────────────────┘  │
└─────────────────────────────────────────┘

┌─────────────────────────────────────────┐
│         Identity Server                 │
│      (OAuth 2.0 / OIDC)                 │
└─────────────────────────────────────────┘
```

## Принципы проектирования

Все модули следуют следующим принципам:

- **Clean Architecture** - разделение на слои с зависимостями внутрь
- **Domain-Driven Design (DDD)** - фокус на доменной модели
- **CQRS** - разделение команд и запросов (где применимо)
- **Event-Driven Architecture** - асинхронная коммуникация через события
- **Microservices** - независимые сервисы с четкими границами
- **SOLID** - принципы объектно-ориентированного проектирования

## Технологический стек

- **.NET 10.0** - платформа разработки
- **ASP.NET Core** - веб-фреймворк
- **Blazor Server** - веб-приложение
- **Entity Framework Core** - ORM
- **PostgreSQL** - основная БД
- **Redis** - кэширование и корзина
- **RabbitMQ** - Event Bus
- **gRPC** - высокопроизводительная коммуникация
- **.NET Aspire** - оркестрация и мониторинг
- **Duende IdentityServer** - аутентификация
- **OpenTelemetry** - телеметрия

## Навигация

Для получения подробной информации о конкретном модуле, перейдите по соответствующей ссылке выше. Каждый модуль содержит:

- Описание назначения модуля
- Список проектов модуля с их ответственностью
- Архитектуру взаимодействия
- Основные потоки данных
- Особенности реализации
- Зависимости и интеграции

## Обновление документации

Документация обновляется при изменении структуры модулей или добавлении новых проектов. Каждый файл документации соответствует конкретному модулю и содержит актуальную информацию о его проектах.
